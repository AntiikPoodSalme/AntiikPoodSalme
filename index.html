<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        header a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
        }
        .search-bar {
            margin: 1rem auto;
            text-align: center;
        }
        .search-bar input {
            padding: 0.5rem;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .product-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin: 2rem;
        }
        .product-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 200px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
            padding: 1rem;
        }
        .product-card img {
            max-width: 100%;
            height: auto;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1rem;
        }
        footer {
            text-align: center;
            padding: 1rem;
            background: #333;
            color: white;
            margin-top: 2rem;
        }
        .admin-panel {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
        }
        .admin-panel form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .admin-panel form input, .admin-panel form textarea, .admin-panel form button {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .admin-panel form button {
            background: #333;
            color: white;
            cursor: pointer;
        }
        .product-details {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .product-details img {
            max-width: 100%;
            height: auto;
            margin-bottom: 1rem;
        }
        @media (max-width: 768px) {
            .product-card {
                width: 100%;
                max-width: 300px;
            }
            .admin-panel {
                width: 90%;
            }
            .product-details {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>My Shop</h1>
        <nav>
            <a href="#" id="sign-in">Sign In</a>
        </nav>
    </header>

    <div class="search-bar">
        <input type="text" id="search-bar" placeholder="Search products...">
    </div>

    <div class="product-list">
        <!-- Product cards will be dynamically generated here -->
    </div>

    <footer>
        <p>Contact us at <a href="mailto:support@myshop.com">support@myshop.com</a></p>
    </footer>

    <section class="admin-panel" id="admin-panel">
        <h2>Admin Panel</h2>
        <div id="admin-product-list">
            <!-- Editable product list for admin -->
        </div>
        <form id="admin-form">
            <label for="product-name">Product Name</label>
            <input type="text" id="product-name" placeholder="Enter product name" required>

            <label for="product-description">Product Description</label>
            <textarea id="product-description" placeholder="Enter product description" required></textarea>

            <label for="product-image">Preview Image URL</label>
            <input type="text" id="product-image" placeholder="Enter preview image URL" required>

            <label for="additional-images">Additional Image URLs (comma separated)</label>
            <input type="text" id="additional-images" placeholder="Enter additional image URLs">

            <button type="submit">Add Product</button>
        </form>
    </section>

    <script>
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let isAdmin = false; // Flag to check if the user is an admin

        document.getElementById('sign-in').addEventListener('click', () => {
            const email = prompt('Enter your email:');
            const password = prompt('Enter your password:');

            if (email === 'admin@web.com' && password === 'adminpass123') {
                isAdmin = true;
                alert('Welcome back, Admin!');
                document.getElementById('admin-panel').style.display = 'block';
            } else {
                alert('You are not an admin.');
            }
        });

        const adminForm = document.getElementById('admin-form');
        adminForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const previewImage = document.getElementById('product-image').value;
            const additionalImages = document.getElementById('additional-images').value.split(',').map(img => img.trim());

            const product = {
                id: Math.random().toString(36).substr(2, 9),
                name,
                description,
                previewImage,
                additionalImages,
                onSale: true,
            };

            products.push(product);
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
            adminForm.reset();
        });

        function renderProducts() {
            const productList = document.querySelector('.product-list');
            productList.innerHTML = '';

            products.forEach(product => {
                if (product.onSale) {
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');

                    productCard.innerHTML = `
                        <img src="${product.previewImage}" alt="${product.name}">
                        <h2>${product.name}</h2>
                        <p>${product.description.substring(0, 50)}...</p>
                        <button onclick="viewProduct('${product.id}')">More Info</button>
                        ${isAdmin ? `<button onclick="editProduct('${product.id}')">Edit</button>` : ''}
                        ${isAdmin ? `<button onclick="toggleSale('${product.id}')">Remove from Sale</button>` : ''}
                    `;

                    productList.appendChild(productCard);
                }
            });
        }

        function viewProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            const detailsWindow = window.open('', '_blank');
            detailsWindow.document.write(`
                <html>
                <head>
                    <title>${product.name}</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            margin: 0;
                            padding: 1rem;
                            background-color: #f4f4f4;
                        }
                        .product-details {
                            max-width: 800px;
                            margin: auto;
                            padding: 1rem;
                            background: white;
                            border: 1px solid #ddd;
                            border-radius: 5px;
                            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                        }
                        .product-details img {
                            max-width: 100%;
                            height: auto;
                            margin-bottom: 1rem;
                        }
                    </style>
                </head>
                <body>
                    <div class="product-details">
                        <img src="${product.previewImage}" alt="${product.name}">
                        <h1>${product.name}</h1>
                        <p>${product.description}</p>
                        ${product.additionalImages.map(img => `<img src="${img}" alt="Additional image">`).join('')}
                    </div>
                </body>
                </html>
            `);
            detailsWindow.document.close();
        }

        function toggleSale(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                product.onSale = !product.onSale;
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            }
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            const name = prompt('Edit Product Name:', product.name);
            const description = prompt('Edit Product Description:', product.description);
            const previewImage = prompt('Edit Preview Image URL:', product.previewImage);
            const additionalImages = prompt('Edit Additional Image URLs (comma-separated):', product.additionalImages.join(','));

            if (name && description && previewImage) {
                product.name = name;
                product.description = description;
                product.previewImage = previewImage;
                product.additionalImages = additionalImages.split(',').map(img => img.trim());
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            }
        }

        document.getElementById('search-bar').addEventListener('input', (e) => {
            const searchValue = e.target.value.toLowerCase();
            const filteredProducts = products.filter(product => product.name.toLowerCase().includes(searchValue));
            renderFilteredProducts(filteredProducts);
        });

        function renderFilteredProducts(filteredProducts) {
            const productList = document.querySelector('.product-list');
            productList.innerHTML = '';

            filteredProducts.forEach(product => {
                if (product.onSale) {
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');

                    productCard.innerHTML = `
                        <img src="${product.previewImage}" alt="${product.name}">
                        <h2>${product.name}</h2>
                        <p>${product.description.substring(0, 50)}...</p>
                        <button onclick="viewProduct('${product.id}')">More Info</button>
                        ${isAdmin ? `<button onclick="editProduct('${product.id}')">Edit</button>` : ''}
                        ${isAdmin ? `<button onclick="toggleSale('${product.id}')">Remove from Sale</button>` : ''}
                    `;

                    productList.appendChild(productCard);
                }
            });
        }

        renderProducts();
    </script>
</body>
</html>

